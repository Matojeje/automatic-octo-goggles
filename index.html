<!--
	MD 27.9.18
	v 3.1

	využívá Materialize, True Favicon Generator, JavaScript, Platform.js, Moment.js
-->

<!DOCTYPE html>
<html lang="cz">
<head>
	<title>Škola</title>

	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="ie-edge">
	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

	<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!--Import main fonts
	<link href="https://fonts.googleapis.com/css?family=Exo+2|Open+Sans&amp;subset=latin-ext" rel="stylesheet">-->
	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

	<link rel="apple-touch-icon" sizes="180x180" href="https://matojeje.github.io/automatic-octo-goggles/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://matojeje.github.io/automatic-octo-goggles/favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="https://matojeje.github.io/automatic-octo-goggles/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="194x194" href="https://matojeje.github.io/automatic-octo-goggles/favicon-194x194.png">
	<link rel="icon" type="image/png" sizes="192x192" href="https://matojeje.github.io/automatic-octo-goggles/android-chrome-192x192.png">

	<!-- https://stackoverflow.com/questions/41881525/chrome-add-to-desktop-icon-not-working#comment70945312_41881525 -->
	<link rel="shortcut icon" type="image/png" sizes="192x192" href="https://matojeje.github.io/automatic-octo-goggles/android-chrome-192x192.png">
	<link rel="shortcut icon" type="image/png" sizes="256x256" href="https://matojeje.github.io/automatic-octo-goggles/android-chrome-256x256.png">

	<link rel="mask-icon" href="https://matojeje.github.io/automatic-octo-goggles/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-title" content="&Scaron;kola">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="application-name" content="&Scaron;kola">
	<meta name="msapplication-TileColor" content="#00aba9">
	<meta name="msapplication-TileImage" content="https://matojeje.github.io/automatic-octo-goggles/mstile-144x144.png">
	<meta name="theme-color" content="#009f71">

	<meta name="robots" content="noindex"/>
	<meta name="description" content="" />

	<style>
		.cc {background-color: #009f71 !important;} /*custom color*/
		.bm {margin-bottom: 0.4em;} /*button margin*/
		.bi {margin-top: -0.2em; transform:matrix(1,0,0,1,-2.5,5)} /*bad image*/
		.minor {opacity: 0.4} /*minor text*/
	</style>
	
	<link rel="manifest" href="https://matojeje.github.io/automatic-octo-goggles/manifest.json">
</head>

<body bgcolor="#111" onload="loaded"> <!--  class="nav-wrapper blue-grey darken-4 z-depth-5"  -->
	<nav class="blue-grey darken-4 z-depth-5" id="head">
		<div class="nav-wrapper container">
			<a href="#" class="brand-logo left">Škola</a>
			<ul id="nav-mobile" class="right">
				<li class="active"><a href="index.html">Zkratky</a></li>
				<li><a href="prazdniny.html">Prázdniny</a></li>
			</ul>
		</div>
	</nav>
	
	<!--<div class="progress black" id="loading">
		<div class="indeterminate"></div>
	</div>-->

	<div class="minor white-text fixed-action-btn" title="Místní čas tvého zařízení. Pro opravdu aktuální čas navštiv stránku time.is!" id="clock"></div>

	<br>

	<div id="hlavni" class="container white-text">

	<div class="row">

		<div class="col s12 m6 l4">
			<h4>Rozvrh hodin</h4>

			<a class="hoverable waves-effect btn cc bm" href="https://www.spseol.cz/data/rozvrhy/rozvrhtr.htm">
				Rozvrh tříd</a>
			<a class="hoverable waves-effect btn cc bm" href="https://www.spseol.cz/data/rozvrhy/suplobec.htm">
				Změny v rozvrhu</a>
			
			<br>
			<div id="hodina" class="minor">Je n. hodina.</div>
		</div>
		<div class="col s12 m6 l4">
			<h4>Jídelna</h4>

			<a class="hoverable waves-effect btn purple bm" href="https://www.strava.cz/Strava/Stravnik/Jidelnicky?tisk&zarizeni=1005#jidelnicky_jidelnicek_obalka">
				Jídelníček</a>
			<a class="hoverable waves-effect btn purple bm" href="https://www.strava.cz/Strava/Stravnik/Objednavky#objednavky-obsah">
				Objednávky</a>
		</div>
		<div class="col s12 m6 l4">
			<h4>Ostatní</h4>

			<a class="hoverable waves-effect btn red bm" href="https://www.spseol.cz/informace-o-skole/dokumenty-skoly?download=1:skolni-rad">
				<i class="material-icons left">picture_as_pdf</i>
				Školní řád</a>

			<a class="hoverable waves-effect btn cyan bm" href="https://www.spseol.cz/kalendar#jevents_body">
				Kalendář</a>

			<a class="hoverable waves-effect btn cyan bm" href="https://mailgw.spseol.cz/">
				E-mail</a>

			<a class="hoverable waves-effect btn cyan bm" href="https://klasifikace.spseol.cz/">
				Klasifikace</a>
		</div>

	</div>

	<div id="homescreenTip" style="display:none;"><footer>
		<div class="row">
			<div class="col s12 m6">
				<div class="card card-content blue-grey darken-1" style="padding:1em">
				<span class="card-title">Tip!</span>
				<p>Přidej si tuhle stránku na domovskou obrazovku jako WebAPK!<br><hr>
					<i class="material-icons bi">more_vert arrow_forward</i>
					<span class="btn-flat white-text waves-effect" style="margin-left: -0.5em; margin-top: -0.25em">
						Přidat na plochu
					</span>
				</p>
				</div>
			</div>
		</div>
	</div></footer></div>

<script>
	const rozvrh = [705,750,800,845,850,935,945,1030,1045,1130,1135,
	1220,1240,1325,1330,1415,1420,1505,1510,1555];

	function loaded() {
		let rozvrh = [705,750,800,845,850,935,945,1030,1045,1130,1135,
		1220,1240,1325,1330,1415,1420,1505,1510,1555];

		//document.getElementById("loading").style = "display:none"

		var date = new Date();
		var timecode = date.getHours()*100 + date.getMinutes()
		
		document.getElementById("clock").innerHTML = "v3 :: " + date.toLocaleTimeString();

		if (timecode < 30 || timecode > 2330) {
			document.getElementById("hodina").innerHTML = `Je docela pozdě!`;
			//console.log("je pozdě")
		} else if(timecode >= 30 && timecode < 530) {
			document.getElementById("hodina").innerHTML = `Měl bys jít spát...`;
			//console.log("je hodně pozdě")
		} else if(timecode >= 705 && timecode <= 1555) {
			document.getElementById("hodina").innerHTML = pojmenovat(timecode,rozvrh,(moment().isoWeekday() > 5));
			//console.log("je škola")
		} else {
			document.getElementById("hodina").innerHTML = `Právě teď není škola`;
			//console.log("není nic")
		}
		
		if (window.matchMedia('(display-mode: standalone)').matches) {
			document.getElementById("head").style = `
				background: linear-gradient(0deg, rgb(0,159,113) 0%, rgb(0,95,68) 100%);`
		} else {
			if (platform.name == "Chrome Mobile") {
				document.getElementById("homescreenTip").style = "display:inherit";
			}
		}


		first = false;
		return timecode;
	}

	function pojmenovat(t,r,w) {
		for (var i = 0; i < r.length; i++) {
			if (t >= r[i] && t < r[i+1]) {
				break;
			}
		}

		if (w) {s = "Kdyby nebyl víkend, byla by"} else {s = "Je"}

		if (isOdd(i)) {
			return `${s} přestávka před ${Math.ceil(i/2)}. hodinou.`
		} else if (isEven(i)) {
			return `${s} ${Math.floor(i/2)}. hodina.`
		} else {
			console.log(i);
			return `Chyba při výpočtu hodiny.`
		}
	}

	// https://stackoverflow.com/a/6211660	{
		function isEven(n) {
			return n % 2 == 0;
		}

		function isOdd(n) {
			return Math.abs(n % 2) == 1;
		}
	//	}

/*
	// https://developers.google.com/web/fundamentals/primers/service-workers/ {
	//  }
*/

	// loaded();

	first = true;

	window.onload = loaded; // https://stackoverflow.com/a/807895
	var updater = window.setInterval(loaded, 1 * 1000); // https://stackoverflow.com/a/2170924; https://www.w3schools.com/js/js_timing.asp

</script>

	</div>

	
	<script type="text/javascript" src="https://matojeje.github.io/automatic-octo-goggles/js/materialize.min.js"></script>
	<script type="text/javascript" src="https://matojeje.github.io/automatic-octo-goggles/js/platform.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>

	<script> // https://codelabs.developers.google.com/codelabs/add-to-home-screen/#5
		if ('serviceWorker' in navigator) {
//			console.log("Will the service worker register?");
			navigator.serviceWorker.register('service-worker.js')
//				scope: '.' // https://stackoverflow.com/a/46541072
			.then(function(reg){
//				console.log("Yes, it did.");
			}).catch(function(err) {
				console.log("No it didn't. This happened: ", err)
			});
		}
	</script>


</body>
</html>
